{"ast":null,"code":"var _jsxFileName = \"/Users/vyacheslavsokolov/Dropbox/react-projects/crud/src/components/UserTable.jsx\";\nimport React, { useState, useEffect } from 'react';\n\nconst UserTable = ({\n  addUser,\n  deleteUser,\n  users,\n  setUsers,\n  updateUser,\n  editing,\n  setEditing,\n  editRow,\n  currentUser\n}) => {\n  const [userName, setUserName] = useState('');\n  const [userSurname, setUserSurname] = useState('');\n  const [user, setUser] = useState(currentUser); // используем effect-hook\n\n  useEffect(() => {\n    // вызывай данную функцию\n    setUser(currentUser);\n  }, [props] // всегда, если изменились props\n  );\n\n  const handleInputChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setUser({ ...user,\n      [name]: value\n    });\n  };\n\n  const handleSubmitUpd = event => {\n    event.preventDefault();\n    if (!user.name || !user.username) return;\n    props.updateUser(user.id, user);\n  };\n\n  const handleDeleteUser = id => {\n    let answer = window.confirm('Вы точно хотите удалить пользователя?');\n\n    if (answer) {\n      deleteUser(id);\n    }\n  };\n\n  const handleSubmitAdd = e => {\n    e.preventDefault(e);\n    addUser(userName, userSurname);\n  };\n\n  const handleChangeName = e => {\n    setUserName(e.currentTarget.value);\n  };\n\n  const handleChangeSurname = e => {\n    setUserSurname(e.currentTarget.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, \"\\u0421\\u043F\\u0438\\u0441\\u043E\\u043A \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0435\\u0439: \", users.length), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, \"Surname\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }, \"Actions\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, users.length > 0 ? users.map(user => /*#__PURE__*/React.createElement(\"tr\", {\n    key: user._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, !user.data ? 'нет данных' : user.data.name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 25\n    }\n  }, !user.data ? 'нет данных' : user.data.surname), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"editBtn\",\n    onClick: () => editRow(user),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 29\n    }\n  }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"button muted-button\",\n    onClick: () => handleDeleteUser(user._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 29\n    }\n  }, \"Delete\")))) : /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    colSpan: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, \"No users\")))), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"labelName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, \"Name \"), /*#__PURE__*/React.createElement(\"input\", {\n    value: userName,\n    type: \"text\",\n    onChange: handleChangeName,\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0438\\u043C\\u044F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"labelSurname\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }\n  }, \"Surname \"), /*#__PURE__*/React.createElement(\"input\", {\n    value: userSurname,\n    type: \"text\",\n    onChange: handleChangeSurname,\n    placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0444\\u0430\\u043C\\u0438\\u043B\\u0438\\u044E\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  })), editing ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }, \"Update user\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: () => {\n      editing = false;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, \"Cancel\")) : /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    onClick: handleSubmitAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, \"Add new user\")));\n};\n\nexport default UserTable;","map":{"version":3,"sources":["/Users/vyacheslavsokolov/Dropbox/react-projects/crud/src/components/UserTable.jsx"],"names":["React","useState","useEffect","UserTable","addUser","deleteUser","users","setUsers","updateUser","editing","setEditing","editRow","currentUser","userName","setUserName","userSurname","setUserSurname","user","setUser","props","handleInputChange","event","name","value","target","handleSubmitUpd","preventDefault","username","id","handleDeleteUser","answer","window","confirm","handleSubmitAdd","e","handleChangeName","currentTarget","handleChangeSurname","length","map","_id","data","surname"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\n\nconst UserTable = ({ addUser, deleteUser, users, setUsers, updateUser, editing, setEditing, editRow, currentUser}) => {\n\n    const [userName, setUserName] = useState('')\n    const [userSurname, setUserSurname] = useState('')\n\n    const [user, setUser] = useState(currentUser)\n\n    // используем effect-hook\n    useEffect(\n        () => {\n            // вызывай данную функцию\n            setUser(currentUser)\n        },\n        [props] // всегда, если изменились props\n    )\n\n    const handleInputChange = event => {\n        const { name, value } = event.target\n\n        setUser({ ...user, [name]: value })\n    }\n\n    const handleSubmitUpd = event => {\n        event.preventDefault()\n        if (!user.name || !user.username) return\n\n        props.updateUser(user.id, user)\n    }\n\n\n    const handleDeleteUser = (id) => {\n        let answer = window.confirm('Вы точно хотите удалить пользователя?')\n        if (answer) {\n            deleteUser(id)\n        }\n    }\n    const handleSubmitAdd = (e) => {\n        e.preventDefault(e)\n        addUser(userName, userSurname)\n    }\n    const handleChangeName = (e) => {\n        setUserName(e.currentTarget.value)\n    }\n    const handleChangeSurname = (e) => {\n        setUserSurname(e.currentTarget.value)\n    }\n\n    return <div>\n        <h1>Список пользователей: {users.length}</h1>\n\n        <table>\n            <thead>\n            <tr>\n                <th>Name</th>\n                <th>Surname</th>\n                <th>Actions</th>\n            </tr>\n            </thead>\n            <tbody>\n            {users.length > 0 ? (\n                users.map(user => (\n                    <tr key={user._id}>\n                        <td>{!user.data ? 'нет данных' : user.data.name }</td>\n                        <td>{!user.data ?  'нет данных' : user.data.surname}</td>\n                        <td>\n                            {/*() => updateUser(user._id)*/}\n                            <button type='button' className='editBtn' onClick={() => editRow(user)}>Edit</button>\n                            <button type='button' className='button muted-button' onClick={() => handleDeleteUser(user._id)}>Delete\n                            </button>\n                        </td>\n\n                    </tr>\n                ))\n            ) : (\n                <tr>\n                    <td colSpan={3}>No users</td>\n                </tr>\n            )}\n            </tbody>\n        </table>\n        <form >\n            <div className='labelName'>\n                <label>Name </label>\n                <input\n                    value={userName}\n                    type='text'\n                    onChange={handleChangeName}\n                    placeholder='Введите имя'\n                />\n            </div>\n            <div className='labelSurname'>\n                <label>Surname </label>\n                <input\n                    value={userSurname}\n                    type='text'\n                    onChange={handleChangeSurname}\n                    placeholder='Введите фамилию'\n                />\n            </div>\n            {editing ? <div><button type='submit'>Update user</button>\n                        <button type='submit' onClick={() => {editing = false}}>Cancel</button></div>\n                     :  <button type='submit' onClick={handleSubmitAdd}>Add new user</button>}\n        </form>\n    </div>\n}\n\nexport default UserTable"]},"metadata":{},"sourceType":"module"}