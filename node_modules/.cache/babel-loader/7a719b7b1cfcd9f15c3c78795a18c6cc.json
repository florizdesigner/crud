{"ast":null,"code":"var _jsxFileName = \"/Users/vyacheslavsokolov/Dropbox/react-projects/crud/src/App.js\";\nimport React, { useState } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport UserTable from './components/UserTable';\n\nfunction App() {\n  const instance = axios.create({\n    baseURL: 'http://178.128.196.163:3000/api/'\n  });\n  const [users, setUsers] = useState([]);\n  const [editing, setEditing] = useState(false);\n  const initialFormState = {\n    id: null,\n    data: {\n      name: '',\n      surname: ''\n    }\n  };\n  const [currentUser, setCurrentUser] = useState(initialFormState);\n  React.useEffect(() => {\n    instance.get('records').then(response => setUsers(response.data));\n  }, []);\n\n  const deleteUser = id => {\n    setEditing(false);\n    instance.delete(`records/${id}`);\n    setUsers(users.filter(user => user._id !== id));\n    console.log(users);\n  };\n\n  const addUser = (userName, userSurname) => {\n    if (userName && userSurname) {\n      const newUser = {\n        \"_id\": Math.random().toString(30).slice(2, 5),\n        \"data\": {\n          \"name\": userName,\n          \"surname\": userSurname\n        }\n      };\n      instance.put('records', {\n        \"data\": {\n          \"name\": userName,\n          \"surname\": userSurname\n        }\n      }).then(() => {\n        setUsers([...users, newUser]);\n        alert('Пользователь добавлен');\n      });\n    } else {\n      alert('Введите данные!');\n    }\n  };\n\n  const editRow = user => {\n    debugger;\n    setEditing(true);\n    const currentValue = {\n      \"id\": user._id,\n      \"data\": {\n        \"name\": user.data.name,\n        \"surname\": user.data.surname\n      }\n    };\n    setCurrentUser(currentValue);\n    console.log(currentUser);\n  };\n\n  const updateUser = (id, name, surname) => {\n    console.log(users);\n    const updatedUser = {\n      \"id\": id,\n      \"data\": {\n        \"name\": name,\n        \"surname\": surname\n      }\n    };\n    setEditing(false);\n    setUsers(users.map(user => user._id === id ? updatedUser : user)); // instance.post(`records/${id}`, {\"data\": {\"name\": name, \"surname\": surname}})\n    //     .then(() => alert('Данные пользователя обновлены'))\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(UserTable, {\n    setUsers: setUsers,\n    users: users,\n    deleteUser: deleteUser,\n    addUser: addUser,\n    updateUser: updateUser,\n    editing: editing,\n    setEditing: setEditing,\n    editRow: editRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/vyacheslavsokolov/Dropbox/react-projects/crud/src/App.js"],"names":["React","useState","axios","UserTable","App","instance","create","baseURL","users","setUsers","editing","setEditing","initialFormState","id","data","name","surname","currentUser","setCurrentUser","useEffect","get","then","response","deleteUser","delete","filter","user","_id","console","log","addUser","userName","userSurname","newUser","Math","random","toString","slice","put","alert","editRow","currentValue","updateUser","updatedUser","map"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport UserTable from './components/UserTable';\n\nfunction App (){\n    const instance = axios.create({\n        baseURL: 'http://178.128.196.163:3000/api/',\n    })\n\n    const [users, setUsers] = useState([])\n    const [editing, setEditing] = useState(false)\n    const initialFormState = {id: null, data: {name: '', surname: ''}}\n    const [currentUser, setCurrentUser] = useState(initialFormState)\n\n    React.useEffect(() => {\n        instance.get('records')\n            .then(response => setUsers(response.data))\n    }, [])\n\n    const deleteUser = (id) => {\n        setEditing(false)\n        instance.delete(`records/${id}`)\n        setUsers(users.filter(user => user._id !== id))\n        console.log(users)\n    }\n    const addUser = (userName, userSurname) => {\n        if (userName && userSurname) {\n            const newUser = {\n                \"_id\": Math.random().toString(30).slice(2,5),\n                \"data\": {\n                    \"name\": userName,\n                    \"surname\": userSurname,\n                }\n            }\n            instance.put('records', {\"data\": {\"name\": userName, \"surname\": userSurname}})\n                .then(() => {\n                    setUsers([...users, newUser])\n                    alert('Пользователь добавлен')\n                })\n\n\n        } else {\n            alert('Введите данные!')\n        }\n    }\n\n    const editRow = (user) => {\n        debugger\n        setEditing(true)\n        const currentValue = {\"id\": user._id, \"data\": {\"name\": user.data.name, \"surname\": user.data.surname}}\n        setCurrentUser(currentValue)\n        console.log(currentUser)\n    }\n\n    const updateUser = (id, name, surname) => {\n        console.log(users)\n        const updatedUser = {\"id\": id,\"data\": {\"name\": name, \"surname\": surname}}\n        setEditing(false)\n        setUsers(users.map(user => user._id === id ? updatedUser : user))\n        // instance.post(`records/${id}`, {\"data\": {\"name\": name, \"surname\": surname}})\n        //     .then(() => alert('Данные пользователя обновлены'))\n    }\n\n    return (\n      <div className=\"App\">\n          <UserTable setUsers={setUsers} users={users} deleteUser={deleteUser}\n                     addUser={addUser} updateUser={updateUser} editing={editing} setEditing={setEditing}\n                     editRow={editRow}/>\n      </div>\n    )\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}